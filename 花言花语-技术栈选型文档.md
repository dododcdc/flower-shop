# 🌺 【花言花语】技术栈选型文档

## 项目概述
为【花言花语】花店选择的技术栈，适合单人开发，注重开发效率和系统稳定性。

## 技术架构

```
Frontend (React + TypeScript)
    ↓ HTTP/REST API
Backend (SpringBoot + MyBatis-Plus)
    ↓ JDBC
Database (MySQL 8.0)
```

## 前端技术栈

### 核心框架
- **React 19**：最新版本UI框架，性能优化和新特性
- **React DOM 19**：React 19对应的DOM渲染器
- **TypeScript 5.0+**：类型安全，减少运行时错误
- **Vite 5.0+**：快速构建工具，提升开发体验

### UI组件库
- **Material UI (MUI) 7.3.5**：Google Material Design组件库，现代化设计
- **@emotion/react** & **@emotion/styled**：CSS-in-JS样式解决方案
- **@fontsource/roboto**：Roboto字体支持

### 状态管理
- **Zustand 4.4+**：轻量级状态管理，简单直观
  - 相比Redux更简单，学习成本低
  - 适合中等复杂度的应用
  - 支持TypeScript类型推导

### 路由管理
- **React Router 6.15+**：React官方推荐的路由库

### HTTP客户端
- **Axios 1.5+**：HTTP请求库，支持请求拦截和响应处理

### 主要依赖包
```json
{
  "react": "^19.0.0",
  "react-dom": "^19.0.0",
  "typescript": "^5.0.0",
  "vite": "^5.0.0",
  "@mui/material": "^7.3.5",
  "@mui/icons-material": "^7.3.5",
  "@emotion/react": "^11.11.0",
  "@emotion/styled": "^11.11.0",
  "@fontsource/roboto": "^5.0.0",
  "zustand": "^4.4.0",
  "react-router-dom": "^6.15.0",
  "axios": "^1.5.0"
}
```

## 后端技术栈

### 核心框架
- **Spring Boot 3.2.x**：现代化的Java Web框架
- **Java 21**：最新LTS版本，性能优秀
- **Maven 3.9+**：项目构建和依赖管理

### 数据访问层
- **MyBatis-Plus 3.5.5**：增强版MyBatis，提高开发效率
- **MySQL Connector 8.2**：MySQL官方JDBC驱动

### ⚠️ 重要：MyBatis-Plus版本兼容性
**官方文档要求**：Spring Boot 3.x必须使用专门的Spring Boot 3 Starter

```xml
<properties>
    <java.version>21</java.version>
    <spring-boot.version>3.2.0</spring-boot.version>
    <mybatis-plus.version>3.5.5</mybatis-plus.version>
    <mysql.version>8.2.0</mysql.version>
</properties>
```

### 正确的依赖配置
```xml
<dependencies>
    <!-- Spring Boot Starter Web -->
    <dependency>
        <groupId>org.springframework.boot</groupId>
        <artifactId>spring-boot-starter-web</artifactId>
    </dependency>

    <!-- MyBatis-Plus for Spring Boot 3 (重要：必须用spring-boot3-starter) -->
    <dependency>
        <groupId>com.baomidou</groupId>
        <artifactId>mybatis-plus-spring-boot3-starter</artifactId>
        <version>${mybatis-plus.version}</version>
    </dependency>

    <!-- MySQL -->
    <dependency>
        <groupId>com.mysql</groupId>
        <artifactId>mysql-connector-j</artifactId>
        <version>${mysql.version}</version>
    </dependency>

    <!-- Lombok -->
    <dependency>
        <groupId>org.projectlombok</groupId>
        <artifactId>lombok</artifactId>
        <optional>true</optional>
    </dependency>
</dependencies>
```

### MyBatis-Plus版本对应关系
- **Spring Boot 2.x** → `mybatis-plus-boot-starter`
- **Spring Boot 3.x** → `mybatis-plus-spring-boot3-starter` ← 必须使用
- **Spring Boot 4.x** → `mybatis-plus-spring-boot4-starter`

**官方文档参考**：https://baomidou.com/getting-started/install/

## 数据库

### 数据库选择
- **MySQL 8.0+**：关系型数据库，适合商品和订单管理
- 事务支持完善，性能稳定
- 社区活跃，文档丰富

### 数据库管理
- **MyBatis-Plus Generator**：代码生成工具
- **Flyway**：数据库版本控制工具
- **MySQL Workbench**：图形化管理工具

## 支付方案

### 第一期：模拟支付
- **实现方式**：前端点击支付后直接返回"支付成功"
- **业务流程**：订单直接进入"已付款"状态
- **目的**：完成完整的业务流程测试

### 第二期：真实支付（待营业执照）
- **支付宝**：企业级支付接口
- **微信支付**：JSAPI支付
- **扩展性**：只需替换支付接口，不影响业务逻辑

### 临时方案（无营业执照）
- **个人收款码**：支付宝、微信个人商家收款码
- **手动确认**：你在后台手动确认订单支付状态
- **第三方平台**：PayJS、虎皮椒等支持个人的支付平台

## 开发环境

### 前端开发环境
```bash
# Node.js版本
Node.js 20.0+ (React 19要求)

# 包管理器
npm 10.0+ 或 yarn 1.22+

# 开发工具
VS Code + 相关插件
```

### 后端开发环境
```bash
# JDK版本
OpenJDK 21+

# 构建工具
Maven 3.9+

# IDE
IntelliJ IDEA 2023+
```

### 数据库环境
```bash
# MySQL版本
MySQL 8.0+

# 管理工具
MySQL Workbench 或 DBeaver
```

## 项目结构

### 前端结构
```
flower-shop-frontend/
├── src/
│   ├── components/     # 公共组件
│   ├── pages/         # 页面组件
│   ├── hooks/         # 自定义Hook
│   ├── store/         # Zustand状态管理
│   ├── services/      # API服务
│   ├── types/         # TypeScript类型定义
│   └── utils/         # 工具函数
├── public/
└── package.json
```

### 后端结构
```
flower-shop-backend/
├── src/
│   ├── main/
│   │   ├── java/
│   │   │   └── com/flower/shop/
│   │   │       ├── controller/  # 控制器
│   │   │       ├── service/     # 服务层
│   │   │       ├── mapper/      # MyBatis-Plus映射器
│   │   │       ├── entity/      # 实体类
│   │   │       ├── dto/         # 数据传输对象
│   │   │       ├── config/      # 配置类
│   │   │       └── util/        # 工具类
│   │   └── resources/
│   │       ├── mapper/          # MyBatis XML文件
│   │       ├── application.yml  # 配置文件
│   │       └── db/              # 数据库脚本
│   └── test/
├── pom.xml
└── README.md
```

## 开发规范

### 代码规范
- **前端**：ESLint + Prettier
- **后端**：阿里巴巴Java开发手册规范
- **数据库**：字段命名规范（下划线分隔）

### API设计
- **RESTful API**：统一的接口设计风格
- **响应格式**：统一的JSON响应结构
- **错误处理**：全局异常处理机制

### 版本控制
- **Git**：分布式版本控制
- **分支策略**：Git Flow工作流
- **提交规范**：Conventional Commits

## 安全考虑

### 前端安全
- **XSS防护**：输入验证和输出编码
- **CSRF防护**：Token验证机制

### 后端安全
- **密码加密**：BCrypt加密存储
- **JWT认证**：用户身份验证
- **SQL注入防护**：MyBatis-Plus参数化查询

### 数据安全
- **敏感信息**：配置文件加密
- **数据备份**：定期备份策略
- **访问控制**：权限管理机制

## 性能优化

### 前端优化
- **代码分割**：React.lazy()按需加载
- **图片优化**：WebP格式，懒加载
- **缓存策略**：浏览器缓存优化

### 后端优化
- **数据库优化**：索引设计，查询优化
- **缓存机制**：Redis缓存热点数据
- **连接池**：数据库连接池配置

## 监控和日志

### 应用监控
- **健康检查**：Spring Boot Actuator
- **性能监控**：JVM性能指标
- **错误追踪**：异常日志记录

### 日志管理
- **日志级别**：DEBUG/INFO/WARN/ERROR
- **日志格式**：结构化日志
- **日志轮转**：文件大小和时间策略

## 部署准备（待定）

### 容器化
- **Docker**：应用容器化
- **Docker Compose**：多容器编排

### 云服务（待调研）
- **服务器**：阿里云ECS或腾讯云CVM
- **数据库**：云数据库RDS
- **域名和SSL**：域名申请和证书配置

## 技术选型优势

### 开发效率
- **React 19 + Material UI 7.3.5**：现代化组件开发，Google Material Design
- **Spring Boot + MyBatis-Plus**：快速搭建后端服务
- **TypeScript**：类型安全，减少bug
- **Zustand**：简洁的状态管理，降低复杂度

### 维护性
- **组件化架构**：代码复用，易于维护
- **RESTful API**：清晰的接口定义
- **数据库设计**：规范化设计，易于扩展

### 扩展性
- **微服务友好**：Spring Boot架构支持后续拆分
- **数据库可扩展**：支持分库分表
- **前端可扩展**：React生态丰富

### 成本效益
- **开源技术栈**：无额外授权费用
- **云服务成本可控**：根据业务量扩展
- **维护成本低**：技术栈成熟稳定

## 风险评估

### 技术风险
- **学习曲线**：React 19新特性和Material UI需要学习成本
- **版本兼容**：React 19生态兼容性需要验证，依赖库版本升级可能引入兼容性问题
- **性能瓶颈**：高并发场景下的性能优化

### 缓解措施
- **分阶段实施**：按优先级逐步实现功能
- **版本锁定**：明确依赖库版本，避免自动升级
- **官方文档参考**：严格按照官方文档配置，特别是MyBatis-Plus

## 后续补充

以下内容需要在后续开发中补充和完善：

### 支付方案
- [ ] 营业执照办理
- [ ] 支付宝支付接入
- [ ] 微信支付接入
- [ ] 退款功能实现

### 部署方案
- [ ] 服务器选型和配置
- [ ] 域名申请和备案
- [ ] SSL证书配置
- [ ] CI/CD流水线搭建

### 运营工具
- [ ] 数据统计分析
- [ ] 客户关系管理
- [ ] 营销活动管理
- [ ] 移动端适配

### 安全加固
- [ ] 更严格的安全配置
- [ ] 数据加密传输
- [ ] 访问权限细化
- [ ] 安全审计功能

## 总结

该技术栈选型基于【花言花语】的实际需求，具备以下特点：

1. **成熟稳定**：都是业界广泛使用的技术
2. **开发友好**：学习成本适中，开发效率高
3. **维护简单**：社区活跃，问题解决成本低
4. **扩展性好**：支持业务发展和功能扩展
5. **成本可控**：技术栈免费，云服务按需付费

### 关键注意事项
- **MyBatis-Plus兼容性**：严格按照Spring Boot 3.x的配置要求
- **版本管理**：明确指定版本，避免兼容性问题
- **官方文档**：优先参考官方文档进行配置

适合单人开发的花店项目，能够在保证质量的前提下快速交付使用。